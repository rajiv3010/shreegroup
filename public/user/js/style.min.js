$(document).ready(function(){$(".box").on("click",".sendtestEmail",function(){$("#myModal").modal("toggle"),$(".compnayName").text($(this).attr("data-compnay-name")),$(".send_advertisement_id").val($(this).attr("data-ad-id"))}),$("#is_affiliate").on("click",function(){$(".yes_affiliate").toggle()}),$("#discount").keyup(function(){var e=$("#cost").val(),a=$(this).val();a=a||0;var s=parseFloat(e)*parseFloat(a)/100;$("#our_price").val(parseFloat(e)-s)}),$(".confirmation").on("click",function(){return confirm("Are you sure? Release the amount for the user")}),$(".changeProfile_photo").click(function(){$("#profile_photo").click()}),$(".advertisementsHistoryDetails").click(function(){var e;e=$(this).data("adver-id"),$.ajax({url:"/admanagement/history/details/"+e}).done(function(e){return $("#advertisementsHistoryDetailsTable").html(e),!1})}),$("#profile_photo").change(function(){$(".loading").show(),$("#profileForm").submit()}),$(".adverStatusChange").change(function(){$("#adverMessage").html('<span class="alert alert-warning">loading...</span>');var e=$(this).val();$.ajax({url:"/admin/advertisementReport/changeStatusReport.jsp/"+e}).done(function(e){$("#adverMessage").html('<span class="alert alert-success">Status has been changed</span>'),location.reload()})}),$(".advertiser_id").change(function(){$("#company_name").val($(this).find(":selected").attr("data-cname"))}),$(".admanagement_id").change(function(){3==$(this).val()?($(".cpltemplate").show(),$(".cpltemplate").html('<div class="form-group col-lg-6"><label>Make Template</label><br>Yes<input type="radio" name="is_template" checked="checked"  value="1">No<input type="radio" name="is_template"   value="0"></div>')):($(".cpltemplate").hide(),$(".cpltemplate").empty())}),$("#ad_level").keyup(function(){var e=$(this).val();if(e>20)return alert("Level max limit is 20"),!1;$("#levelArea").empty();var a="";for(index=1;index<=e;++index)a='<div class="form-group col-lg-2">',a+="<label>Level "+index+"</label>",a+='<div class="input-group date">',a+='<div class="input-group-addon">',a+='<i class="fa fa-percent" aria-hidden="true"></i>',a+="</div>",a+='<input type="text"  name="levelpercent[]" class="form-control pull-right" placeholder="Enter percent for level '+index+'" id="level">',a+="</div>",a+="</div>",$("#levelArea").append(a)}),$(".verify-pin-assoicate").click(function(){$(".message").html("<span class='alert alert-warning'>Please wait...   <i class='fa fa-spinner fa-spin fa-fw'></i></span>"),$(".messageDiv").slideDown(950),$(".loading").show();var e=$("#package_id").val(),a=$("#pin").val();return a?e?void $.ajax({url:"/verifypin/classified.jsp/"+a+"/"+e}).done(function(e){$(".loading").hide(),1==e?($(".message").html("<span class='alert alert-success'>Pin Verifed <i class='fa fa-check' aria-hidden='true'></i></span>"),$(".addNewUser").attr("disabled",!1)):($(".message").html("<span class='alert alert-danger'>Pin not Verify <i class='fa fa-remove fa-fw'></i></span>"),$(".addNewUser").attr("disabled",!0))}):($(".message").html("<span class='alert alert-warning'>Please select package </span>"),!1):($(".message").html("<span class='alert alert-warning'>Please enter pin </span>"),!1)}),$("#verify-pin").click(function(){$(".message").html("<span class='alert alert-warning'>Please wait...   <i class='fa fa-spinner fa-spin fa-fw'></i></span>"),$(".messageDiv").slideDown(950),$(".loading").show(),$("#checksign").hide(),$("#verify-failed").hide();var e=$("#package_id").val(),a=$("#pinVerify").val();$.ajax({url:"/verifypin/classified.jsp/"+a+"/"+e}).done(function(e){if($(".loading").hide(),"dpc"==$("#dpc").val())return 1==e?($("#message").empty(),$("#message").html("<span class='alert alert-warning'>PIN Verifed  <i class='fa-li fa fa-check-square'></i></span>"),!1):($("#message").html("<span class='alert alert-danger'>Invalid combination   <i class='fa fa-remove'></i></span>"),!1);1==e?($("#verify-pin").hide(),$("#verify-success").show()):($("#checksign").show(),$("#verify-pin").show(),$("#verify-failed").show())})}),$(".registration_details").hide(),$("#NextRegistration_details").click(function(){var e=$("#package_id").val(),a=$("#pin").val(),s=$("#sponsor_key").val();return a?s?($.ajax({url:"/get-started/user/packageVerification.jsp/"+e+"/"+a+"/"+s}).done(function(e){if(0==e)return $(".message").html('<div class="alert alert-danger">Either your PIN is used or Invalid</div>'),$(".messageDiv").slideDown(950),!1;$(".message").html('<div class="alert alert-success">Details verify succesfully</div>'),$(".messageDiv").slideUp(950),$("#registration_page").html(e),$("#pin_details").slideUp(1e3),$(".registration_details").slideDown(950)}),!1):($(".message").html('<div class="alert alert-danger">Please Enter sponsor key</div>'),$(".messageDiv").slideDown(950),!1):($(".message").html('<div class="alert alert-danger">Please Enter PIN</div>'),$(".messageDiv").slideDown(950),!1)}),$("body").on("keyup","#name",function(){$("#payee_name").val($(this).val())}),$("#sponsor_key").keyup(function(){var e,a=$(this).val();7==a.toString().length?(e=a,$.ajax({url:"/check/user/sponserUserName.jsp/"+e}).done(function(e){var a=jQuery.parseJSON(e);return 0==e?($("#sponser_name").removeClass("alert-success").addClass("alert-warning"),$("#sponser_name").html("Invalid id"),$("#sponser_name").slideDown(1e3)):($("#sponser_name").removeClass("alert-warning").addClass("alert-success"),$("#sponser_name").html(a.user_name),$("#sponser_name").slideDown(1e3)),!1}),$("#sponser_name").slideDown(1e3),$("#sponser_name").text("searching..."),$("#NextRegistration_details").attr("disabled",!1)):$("#NextRegistration_details").attr("disabled",!0)}),$("#Userregistration").ajaxForm({beforeSend:function(){$(".message").html("<span class='alert alert-warning'>Please wait...</span>"),$(".messageDiv").slideDown(950)},success:function(e){888==e?($(".message").html('<div class="alert alert-success"> Your login succesfully ... Please wait.</div>'),$(".messageDiv").slideDown(950),setTimeout(function(){window.location.href="/home"},200)):($(".message").html('<div class="alert alert-danger">'+e+"</div>"),$(".messageDiv").slideDown(950))},complete:function(e){}}),$("#previewPage").ajaxForm({beforeSend:function(){$(".messageDiv").show(),$(".messageDiv").slideDown(950),$(".message").html("<span class='alert alert-warning'>Please wait...</span>")},success:function(e){try{var a=jQuery.parseJSON(e);1==a.status&&($(".messageDiv").show(),$(".messageDiv").slideDown(950),$(".message").html("<span class='alert alert-danger'>"+a.error+"</span>"))}catch(a){var s=e;$(".message").hide(),$("#pin_details").hide(),$("#registration_page").hide(),$("#previewPageContent").show(),$("#previewPageContent").html(s)}},complete:function(e){}}),$(".login-page").on("click",".resetDetails",function(){$("#registration_page").show(),$("#previewPageContent").hide()}),$("#completeDPCRegistration").ajaxForm({beforeSend:function(){$(".message").html("<span class='alert alert-warning'>Please wait...</span>"),$(".messageDiv").slideDown(950)},success:function(e){888==e?($(".message").html('<div class="alert alert-success"> Your register succesfully ... Please wait.</div>'),$(".messageDiv").slideDown(950),setTimeout(function(){window.location.href="/dpc/home"},9900)):($(".message").html('<div class="alert alert-danger">'+data+"</div>"),$(".messageDiv").slideDown(950))},complete:function(e){}})});

function getNotification(){return $.ajax({url:"/get-notification/user"}).done(function(e){$("#notification_li").html(e)}),!1}function getTree(e){return $.ajax({url:"/getTree/"+e,dataType:"json"}).done(function(e){org_chart=$("#orgChart").orgChart({data:e.sort(),showControls:!0,allowEdit:!0,onAddNode:function(e){org_chart.newNode(e.data.id)},onDeleteNode:function(e){org_chart.deleteNode(e.data.id)},onClickNode:function(e){}})}),!1}function getWidget(){return $.ajax({url:"/get-widget"}).done(function(e){$("#loadingstate").hide(),$(".dashboardwidget").html(e)}),!1}function getPin(e){$.ajax({url:"/classified/cities/pincodes/"+e}).done(function(e){var n=JSON.parse(e),t="";$.each(n,function(e,n){t+="<option value="+n.id+">",t+=""+n.pincode,t+="</option>"}),$("#location_id").html(t)})}$(document).ready(function(){var e=new Date;e.setFullYear((new Date).getFullYear()-18),$(".dob").datepicker({viewMode:"years",endDate:e}),getNotification(),getWidget();var n=$("#current_user").val();null==n||getTree(n),$("#orgChartContainer").on("click",".myTree",function(){getTree($(this).attr("data-my-userKey"))}),$("#apc_package").change(function(){var e=$(this).val();$("#apc_my_pins").html("<option>Searching...</option>"),$.ajax({url:"/dpc/get-apc/pin/"+e}).done(function(e){if($("#takkingPin").text(" "),0==e){var t="";t+="<option value='0'>",t+="No pins for this package",t+="</option>",$("#apc_my_pins").html(t)}else{var n=JSON.parse(e);t="";$.each(n,function(e,n){t+="<option value="+n.pin_number+">",t+=""+n.pin_number,t+="</option>"}),$("#apc_my_pins").html(t)}})}),$("#addNew_package").change(function(){var e=$(this).val();$(".addNewUserPin").html("<option>Searching...</option>"),$.ajax({url:"/user/get/pin/"+e}).done(function(e){if(0==e){var t="";t+="<option value='0'>",t+="No pins for this package",t+="</option>",$(".addNewUserPin").html(t)}else{var n=JSON.parse(e);t="";$.each(n,function(e,n){t+="<option value="+n.pin_number+">",t+=""+n.pin_number,t+="</option>"}),$(".addNewUserPin").html(t)}})}),$("#state_id").change(function(){var e=$(this).val();$.ajax({url:"/classified/cities/"+e}).done(function(e){var n=JSON.parse(e),t="";getPin(n[0].id),$.each(n,function(e,n){t+="<option value="+n.id+">",t+=""+n.name,t+="</option>"}),$("#city_id").html(t)})}),$("#city_id").change(function(){getPin($(this).val())}),$("#business_category_id").change(function(){var e=$(this).val();if(e)if("0"==e){$("#business_sub_category_id").html("<input  type='checkbox' name='business_sub_category_id[]' class='business_sub_category_id' value='0'>Other</option>")}else $.ajax({url:"/classified/sub_business_category/"+e}).done(function(e){var n=JSON.parse(e),t="";$.each(n,function(e,n){t+="<input value="+n.id+' name="business_sub_category_id[]" type="checkbox" class="form-check-input" id="search'+e+'">',t+='<label class="form-check-label business_sub_category_id" for="search">'+n.name+"</label>",t+="&nbsp;&nbsp;&nbsp;&nbsp;"}),$("#business_sub_category_id").html(t)})})});